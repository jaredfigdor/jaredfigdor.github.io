!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define("SlotMachine",[],i):"object"==typeof exports?exports.SlotMachine=i():t.SlotMachine=i()}(self,(()=>(()=>{var t={75:function(t){(function(){var i,e,s,n,r,o;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(t.exports=function(){return(i()-r)/1e6},e=process.hrtime,n=(i=function(){var t;return 1e9*(t=e())[0]+t[1]})(),o=1e9*process.uptime(),r=n-o):Date.now?(t.exports=function(){return Date.now()-s},s=Date.now()):(t.exports=function(){return(new Date).getTime()-s},s=(new Date).getTime())}).call(this)},87:(t,i,e)=>{for(var s=e(75),n="undefined"==typeof window?e.g:window,r=["moz","webkit"],o="AnimationFrame",h=n["request"+o],a=n["cancel"+o]||n["cancelRequest"+o],l=0;!h&&l<r.length;l++)h=n[r[l]+"Request"+o],a=n[r[l]+"Cancel"+o]||n[r[l]+"CancelRequest"+o];if(!h||!a){var c=0,u=0,d=[];h=function(t){if(0===d.length){var i=s(),e=Math.max(0,16.666666666666668-(i-c));c=e+i,setTimeout((function(){var t=d.slice(0);d.length=0;for(var i=0;i<t.length;i++)if(!t[i].cancelled)try{t[i].callback(c)}catch(t){setTimeout((function(){throw t}),0)}}),Math.round(e))}return d.push({handle:++u,callback:t,cancelled:!1}),u},a=function(t){for(var i=0;i<d.length;i++)d[i].handle===t&&(d[i].cancelled=!0)}}t.exports=function(t){return h.call(n,t)},t.exports.cancel=function(){a.apply(n,arguments)},t.exports.polyfill=function(t){t||(t=n),t.requestAnimationFrame=h,t.cancelAnimationFrame=a}}},i={};function e(s){var n=i[s];if(void 0!==n)return n.exports;var r=i[s]={exports:{}};return t[s].call(r.exports,r,r.exports,e),r.exports}e.n=t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},e.d=(t,i)=>{for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),e.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i);var s={};return(()=>{"use strict";e.d(s,{default:()=>a});var t=e(87),i=e.n(t);function n(t,e=0){setTimeout((()=>i()(t)),e)}class r{constructor(t,i){return this.cb=t,this.initialDelay=i,this.delay=i,this.running=!1,this.resume(),this}_start(){this.timer=setTimeout((()=>{this.running=!1,this.cb(this)}),this.delay)}cancel(){this.running=!1,clearTimeout(this.timer)}pause(){this.running&&(this.delay-=(new Date).getTime()-this.startTime,this.cancel())}resume(){this.running||(this.running=!0,this.startTime=(new Date).getTime(),this._start())}reset(){this.cancel(),this.delay=this.initialDelay,this._start()}add(t){this.pause(),this.delay+=t,this.resume()}}const o={active:0,delay:200,auto:!1,spins:5,randomize:void 0,onComplete:void 0,inViewport:!0,direction:"up",transition:"ease-in-out"};var h;!function(t){t.NO_TRANSITION="slotMachineNoTransition",t.FAST="slotMachineBlurFast",t.NORMAL="slotMachineBlurMedium",t.SLOW="slotMachineBlurSlow",t.TURTLE="slotMachineBlurTurtle",t.GRADIENT="slotMachineGradient",t.STOP="slotMachineGradient"}(h||(h={}));const a=class{constructor(t,i){this.element=t,this.tiles=[].slice.call(this.element.children),this.running=!1,this.stopping=!1,this.element.style.overflow="hidden",this._wrapTiles(),this._minTop=-this._fakeFirstTile.offsetHeight,this._maxTop=-this.tiles.reduce(((t,i)=>t+i.offsetHeight),0),this.changeSettings({...o,...i}),this._setBounds(),this._resetPosition(),this.auto&&this.run()}changeSettings(t){Object.keys(t).forEach((i=>{this[i]=t[i]}))}_wrapTiles(){this.container=document.createElement("div"),this.container.classList.add("slotMachineContainer"),this.container.style.transition="1s ease-in-out",this.element.appendChild(this.container),this._fakeFirstTile=this.tiles[this.tiles.length-1].cloneNode(!0),this.container.appendChild(this._fakeFirstTile),this.tiles.forEach((t=>{this.container.appendChild(t)})),this._fakeLastTile=this.tiles[0].cloneNode(!0),this.container.appendChild(this._fakeLastTile)}_setBounds(){const t=this.getTileOffset(this.active),i=this.getTileOffset(this.tiles.length),e=this.getTileOffset(this.tiles.length);this._bounds={up:{key:"up",initial:t,first:0,last:e,to:this._maxTop,firstToLast:e,lastToFirst:0},down:{key:"down",initial:t,first:i,last:0,to:this._minTop,firstToLast:e,lastToFirst:0}}}get active(){return this._active}set active(t){(t<0||t>=this.tiles.length||isNaN(t))&&(t=0),this._active=t}get direction(){return this._direction}set direction(t){this.running||(this._direction="down"===t?"down":"up")}get bounds(){return this._bounds[this._direction]}get transition(){return this._transition}set transition(t){this._transition=t||"ease-in-out"}get visibleTile(){const t=this.tiles[0].offsetHeight,i=this.container.style.transform||"",e=parseInt(i.replace(/^matrix\(-?\d+,\s?-?\d+,\s?-?\d+,\s?-?\d+,\s?-?\d+,\s?(-?\d+)\)$/,"$1"),10);return Math.abs(Math.round(e/t))-1}get random(){return Math.floor(Math.random()*this.tiles.length)}get custom(){let t=this.random;if(this.randomize){let i=this.randomize(this.active);(i<0||i>=this.tiles.length)&&(i=0),t=i}return t}get _prevIndex(){const t=this.active-1;return t<0?this.tiles.length-1:t}get _nextIndex(){const t=this.active+1;return t<this.tiles.length?t:0}get prevIndex(){return"up"===this.direction?this._nextIndex:this._prevIndex}get nextIndex(){return"up"===this.direction?this._prevIndex:this._nextIndex}get visible(){const t=this.element.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,e=window.innerWidth||document.documentElement.clientWidth,s=t.top<=i&&t.top+t.height>=0,n=t.left<=e&&t.left+t.width>=0;return s&&n}set _animationFX(t){n((()=>{[...this.tiles,this._fakeLastTile,this._fakeFirstTile].forEach((i=>{i.classList.remove(h.FAST,h.NORMAL,h.SLOW,h.TURTLE),t!==h.STOP&&i.classList.add(t)})),t===h.STOP?this.container.classList.remove(h.GRADIENT):this.container.classList.add(h.GRADIENT)}),this.delay/4)}_changeTransition(t=this.delay,i=this.transition){this.container.style.transition=`${t/1e3}s ${i}`}_changeTransform(t){this.container.style.transform=`matrix(1, 0, 0, 1, 0, ${t})`}_isGoingBackward(){return!(0!==this.active||this.nextActive!==this.tiles.length-1)}_isGoingForward(){return!(this.active!==this.tiles.length-1||0!==this.nextActive)}getTileOffset(t){let i=0;for(let e=0;e<t;e++)i+=this.tiles[e].offsetHeight;return this._minTop-i}_resetPosition(t){this.container.classList.toggle(h.NO_TRANSITION),this._changeTransform(void 0!==t?t:this.bounds.initial),this.container.offsetHeight,this.container.classList.toggle(h.NO_TRANSITION)}next(){return this.direction="down",this.nextActive=this.nextIndex,this.running=!0,this.stop(),this.nextActive}prev(){return this.direction="up",this.nextActive=this.nextIndex,this.running=!0,this.stop(),this.nextActive}_getDelayFromSpins(t){let i=this.delay;switch(this.transition="linear",t){case 1:i/=.5,this.transition="ease-out",this._animationFX=h.TURTLE;break;case 2:i/=.75,this._animationFX=h.SLOW;break;case 3:i/=1,this._animationFX=h.NORMAL;break;case 4:i/=1.25,this._animationFX=h.NORMAL;break;default:i/=1.5,this._animationFX=h.FAST}return i}shuffle(t,i){if("function"==typeof t&&(i=t),this.running=!0,this.visible||!0!==this.inViewport){const e=this._getDelayFromSpins(t);this._changeTransition(e),this._changeTransform(this.bounds.to),n((()=>{if(!this.stopping&&this.running){const e=t-1;this._resetPosition(this.bounds.first),e>1?this.shuffle(e,i):this.stop(i)}}),e)}else this.stop(i);return this.nextActive}stop(t){if(!this.running||this.stopping)return this.nextActive;this.running=!0,this.stopping=!0,Number.isInteger(this.nextActive)||(this.nextActive=this.custom),this._isGoingBackward()?this._resetPosition(this.bounds.firstToLast):this._isGoingForward()&&this._resetPosition(this.bounds.lastToFirst),this.active=this.nextActive;const i=this._getDelayFromSpins(1);return this._changeTransition(i),this._animationFX=h.STOP,this._changeTransform(this.getTileOffset(this.active)),n((()=>{this.stopping=!1,this.running=!1,this.nextActive=void 0,"function"==typeof this.onComplete&&this.onComplete(this.active),"function"==typeof t&&t.apply(this,[this.active])}),i),this.active}run(){this.running||(this._timer=new r((()=>{this.visible||!0!==this.inViewport?this.shuffle(this.spins,(()=>{this._timer.reset()})):n((()=>{this._timer.reset()}),500)}),this.delay))}destroy(){this._fakeFirstTile.remove(),this._fakeLastTile.remove(),this.tiles.forEach((t=>{this.element.appendChild(t)})),this.container.remove()}}})(),s=s.default})()));
//# sourceMappingURL=slotmachine.min.js.map